<html>
<head>
<title>Pullback.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Pullback.v</h1>

<div class="code" title="File: Pullback.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*- *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 1
Time: 0.03s">
<div class="time" style="width: 12.765957446809%"></div>
<pre>Require Import HoTT.Basics HoTT.Types.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 1
Time: 0.005s">
<div class="time" style="width: 2.1276595744681%"></div>
<pre>
Require Import HFiber PathAny Cubical.PathSquare.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * Pullbacks *)

(** The pullback as an object *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 8
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Pullback {A B C} (f : B -&gt; A) (g : C -&gt; A)
  := { b : B &amp; { c : C &amp; f b = g c }}.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Arguments Pullback {A B C}%type_scope (f g)%function_scope.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The universal commutative square *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 13
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>Definition pullback_pr1 {A B C} {f : B -&gt; A} {g : C -&gt; A}
: Pullback f g -&gt; B := (fun z =&gt; z.1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 14
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Definition pullback_pr2 {A B C} {f : B -&gt; A} {g : C -&gt; A}
: Pullback f g -&gt; C := (fun z =&gt; z.2.1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 16
Time: 0.005s">
<div class="time" style="width: 2.1276595744681%"></div>
<pre>
Definition pullback_commsq {A B C} (f : B -&gt; A) (g : C -&gt; A)
: f o pullback_pr1 == g o pullback_pr2
:= (fun z =&gt; z.2.2).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The universally induced map into it by any commutative square *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 21
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>Definition pullback_corec {A B C D}
           {f : A -&gt; B} {g : C -&gt; D} {h : A -&gt; C} {k : B -&gt; D}
           (p : k o f == g o h)
: A -&gt; Pullback k g
:= fun a =&gt; (f a ; h a ; p a).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 25
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Symmetry of the pullback *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 27
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_pullback_symm {A B C} (f : B -&gt; A) (g : C -&gt; A)
: Pullback f g &lt;~&gt; Pullback g f.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 28
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE equiv_sigma_symm (fun b c =&gt; f b = g c)).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros c.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 31
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros b.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_path_inverse.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 34
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Pullback over [Unit] is equivalent to a product. *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_pullback_unit_prod (A B : Type)
: Pullback (@const A Unit tt) (@const B Unit tt) &lt;~&gt; A * B.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (equiv_adjointify _ _ _ _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 40
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre> intros [a [b _]]; exact (a , b).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 41
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre> intros [a b]; exact (a ; b ; 1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [a b]; exact 1.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 43
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre> intros [a [b p]]; simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (path_sigma' _ 1); simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (path_sigma' _ 1); simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 45
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    apply path_contr.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 46
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The property of a given commutative square being a pullback *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 49
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>Definition IsPullback {A B C D}
           {f : A -&gt; B} {g : C -&gt; D} {h : A -&gt; C} {k : B -&gt; D}
           (p : k o f == g o h)
  := IsEquiv (pullback_corec p).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 52
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>

Definition equiv_ispullback {A B C D}
           {f : A -&gt; B} {g : C -&gt; D} {h : A -&gt; C} {k : B -&gt; D}
           (p : k o f == g o h) (ip : IsPullback p)
  : A &lt;~&gt; Pullback k g
  := Build_Equiv _ _ (pullback_corec p) ip.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** This is equivalent to the transposed square being a pullback. *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 60
Time: 0.003s">
<div class="time" style="width: 1.2765957446809%"></div>
<pre>Definition ispullback_symm {A B C D}
           {f : A -&gt; B} {g : C -&gt; D} {h : A -&gt; C} {k : B -&gt; D}
           (p : g o h == k o f) (pb : IsPullback (fun a =&gt; (p a)^))
  : IsPullback p.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 64
Time: 0.024s">
<div class="time" style="width: 10.212765957447%"></div>
<pre>
  rapply (cancelL_isequiv (equiv_pullback_symm g k)).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply pb.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 66
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The pullback of the projections [{d:D &amp; P d} -&gt; D &lt;- {d:D &amp; Q d}] is equivalent to [{d:D &amp; P d * Q d}]. *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 69
Time: 0.003s">
<div class="time" style="width: 1.2765957446809%"></div>
<pre>Definition ispullback_sigprod {D : Type} (P Q : D -&gt; Type)
  : IsPullback (fun z:{d:D &amp; P d * Q d} =&gt; 1%path : (z.1;fst z.2).1 = (z.1;snd z.2).1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 71
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
  srapply isequiv_adjointify.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 73
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre> intros [[d1 p] [[d2 q] e]]; cbn in e.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 73
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists d1.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (p, e^ # q).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 75
Time: 0.004s">
<div class="time" style="width: 1.7021276595745%"></div>
<pre> intros [[d1 p] [[d2 q] e]]; unfold pullback_corec; cbn in *.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 75
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    destruct e; reflexivity.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 76
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 77
Time: 0.011s">
<div class="time" style="width: 4.6808510638298%"></div>
<pre> intros [d [p q]]; reflexivity.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 77
Time: 0.004s">
<div class="time" style="width: 1.7021276595745%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 78
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>

Definition equiv_sigprod_pullback {D : Type} (P Q : D -&gt; Type)
  : {d:D &amp; P d * Q d} &lt;~&gt; Pullback (@pr1 D P) (@pr1 D Q)
  := Build_Equiv _ _ _ (ispullback_sigprod P Q).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** For any commutative square, the fiber of the fibers is equivalent to the fiber of the "gap map" [pullback_corec]. *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 84
Time: 0.003s">
<div class="time" style="width: 1.2765957446809%"></div>
<pre>Definition hfiber_pullback_corec {A B C D}
           {f : A -&gt; B} {g : C -&gt; D} {h : A -&gt; C} {k : B -&gt; D}
           (p : k o f == g o h) (b : B) (c : C) (q : k b = g c)
  : hfiber (pullback_corec p) (b; c; q) &lt;~&gt; hfiber (functor_hfiber p b) (c; q^).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 88
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold hfiber, functor_hfiber, functor_sigma.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 89
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros a; cbn.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 91
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
  refine (_ oE (equiv_path_sigma _ _ _)^-1); cbn.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 92
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intro p0; cbn.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 93
Time: 0.003s">
<div class="time" style="width: 1.2765957446809%"></div>
<pre>
  rewrite transport_sigma'; cbn.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 94
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
  refine ((equiv_path_sigma _ _ _) oE _ oE (equiv_path_sigma _ _ _)^-1); cbn.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intro p1; cbn.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 96
Time: 0.01s">
<div class="time" style="width: 4.2553191489362%"></div>
<pre>
  rewrite !transport_paths_Fr, !transport_paths_Fl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 97
Time: 0.003s">
<div class="time" style="width: 1.2765957446809%"></div>
<pre>
  refine (_ oE (equiv_ap (equiv_path_inverse _ _) _ _)); cbn.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_concat_l.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 99
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
  refine (_ @ (inv_pp _ _)^).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 100
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>  apply whiskerL.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 100
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ @ (inv_pp _ _)^).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>  apply whiskerL.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  symmetry; apply inv_V.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 102
Time: 0.02s">
<div class="time" style="width: 8.5106382978723%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** If the induced map on fibers is an equivalence, then a square is a pullback. *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 105
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>Definition ispullback_isequiv_functor_hfiber {A B C D}
           {f : A -&gt; B} {g : C -&gt; D} {h : A -&gt; C} {k : B -&gt; D}
           (p : k o f == g o h)
           (e : forall b:B, IsEquiv (functor_hfiber p b))
  : IsPullback p.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold IsPullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply isequiv_contr_map; intro x.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 112
Time: 0.003s">
<div class="time" style="width: 1.2765957446809%"></div>
<pre>
  rapply contr_equiv'.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 114
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre> symmetry; apply hfiber_pullback_corec.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 115
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre> exact _.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 115
Time: 0.005s">
<div class="time" style="width: 2.1276595744681%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The pullback of a map along another one *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition pullback_along {A B C} (f : B -&gt; A) (g : C -&gt; A)
: Pullback f g -&gt; B
  := pr1.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 120
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Notation "f ^*" := (pullback_along f) : function_scope.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition hfiber_pullback_along {A B C} (f : B -&gt; A) (g : C -&gt; A) (b:B)
: hfiber (f ^* g) b &lt;~&gt; hfiber g (f b).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 125
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 126
Time: 0.015s">
<div class="time" style="width: 6.3829787234043%"></div>
<pre>
  refine (equiv_functor_sigma_id (fun c =&gt; equiv_path_inverse _ _) oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 127
Time: 0.01s">
<div class="time" style="width: 4.2553191489362%"></div>
<pre>
  make_equiv_contr_basedpaths.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 128
Time: 0.003s">
<div class="time" style="width: 1.2765957446809%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** And the dual sort of pullback *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition pullback_along' {A B C} (g : C -&gt; A) (f : B -&gt; A)
: Pullback f g -&gt; C
  := fun z =&gt; z.2.1.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments pullback_along' / .</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Notation "g ^*'" := (pullback_along' g) : function_scope.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition hfiber_pullback_along' {A B C} (g : C -&gt; A) (f : B -&gt; A) (c:C)
: hfiber (g ^*' f) c &lt;~&gt; hfiber f (g c).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 141
Time: 0.01s">
<div class="time" style="width: 4.2553191489362%"></div>
<pre>
  make_equiv_contr_basedpaths.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 142
Time: 0.003s">
<div class="time" style="width: 1.2765957446809%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 143
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section Functor_Pullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 145
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>

  Context {A1 B1 C1 A2 B2 C2}
          (f1 : B1 -&gt; A1) (g1 : C1 -&gt; A1)
          (f2 : B2 -&gt; A2) (g2 : C2 -&gt; A2)
          (h : A1 -&gt; A2) (k : B1 -&gt; B2) (l : C1 -&gt; C2)
          (p : f2 o k == h o f1) (q : g2 o l == h o g1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 151
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>

  Definition functor_pullback : Pullback f1 g1 -&gt; Pullback f2 g2
    := functor_sigma k
        (fun b1 =&gt; (functor_sigma l
                     (fun c1 e1 =&gt; p b1 @ ap h e1 @ (q c1)^))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 156
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>

  Definition hfiber_functor_pullback (z : Pullback f2 g2)
  : hfiber functor_pullback z
    &lt;~&gt; Pullback (transport (hfiber h) z.2.2 o functor_hfiber (k := f2) p z.1)
                 (functor_hfiber q z.2.1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 162
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    destruct z as [b2 [c2 e2]].</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 163
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (_ oE hfiber_functor_sigma _ _ _ _ _ _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 164
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply equiv_functor_sigma_id.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 165
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    intros [b1 e1]; simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 166
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    refine (_ oE (equiv_transport _ _ _ (transport_sigma' e1^ (c2; e2)))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 167
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    refine (_ oE hfiber_functor_sigma _ _ _ _ _ _); simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply equiv_functor_sigma_id.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 169
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    intros [c1 e3]; simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 170
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    refine (_ oE (equiv_transport _ _ _
                   (ap (fun e =&gt; e3^ # e) (transport_paths_Fl e1^ e2)))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 172
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    refine (_ oE (equiv_transport _ _ _ (transport_paths_Fr e3^ _))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 173
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold functor_hfiber; simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 174
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    refine (equiv_concat_l (transport_sigma' e2 _) _ oE _); simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 175
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    refine (equiv_path_sigma _ _ _ oE _); simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 176
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    apply equiv_functor_sigma_id; intros e0; simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 177
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    refine (equiv_concat_l (transport_paths_Fl e0 _) _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 178
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    refine (equiv_concat_l (whiskerL (ap h e0)^ (transport_paths_r e2 _)) _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_moveR_Vp _ _ _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 180
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    refine (equiv_concat_l (concat_pp_p _ _ _) _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_moveR_Vp _ _ _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 182
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>
    do 2 refine (equiv_concat_r (concat_pp_p _ _ _) _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 183
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_moveL_pM _ _ _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 184
Time: 0.015s">
<div class="time" style="width: 6.3829787234043%"></div>
<pre>
    abstract (rewrite !ap_V, inv_V; refine (equiv_path_inverse _ _)).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 185
Time: 0.021s">
<div class="time" style="width: 8.936170212766%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 186
Time: 0.012s">
<div class="time" style="width: 5.1063829787234%"></div>
<pre>

End Functor_Pullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section EquivPullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 190
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>
  Context {A B C f g A' B' C' f' g'}
          (eA : A &lt;~&gt; A') (eB : B &lt;~&gt; B') (eC : C &lt;~&gt; C')
          (p : f' o eB == eA o f) (q :  g' o eC == eA o g).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Lemma equiv_pullback
    : Pullback f g &lt;~&gt; Pullback f' g'.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 197
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold Pullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (equiv_functor_sigma' eB); intro b.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (equiv_functor_sigma' eC); intro c.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_concat_l (p _) _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_concat_r (q _)^ _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_ap' eA _ _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End EquivPullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 206
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


(** Pullbacks commute with sigmas *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section PullbackSigma.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context
    {X Y Z : Type}
    {A : X -&gt; Type} {B : Y -&gt; Type} {C : Z -&gt; Type}
    (f : Y -&gt; X) (g : Z -&gt; X)
    (r : forall x, B x -&gt; A (f x))
    (s : forall x, C x -&gt; A (g x)).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 216
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>

  Definition equiv_sigma_pullback
    : {p : Pullback f g &amp; Pullback (transport A p.2.2 o r p.1) (s p.2.1)}
      &lt;~&gt; Pullback (functor_sigma f r) (functor_sigma g s).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 220
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_functor_sigma_id (fun _ =&gt; equiv_functor_sigma_id _) oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros; rapply equiv_path_sigma.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 224
Time: 0.044s">
<div class="time" style="width: 18.723404255319%"></div>
<pre> make_equiv.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 224
Time: 0.016s">
<div class="time" style="width: 6.8085106382979%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 225
Time: 0.008s">
<div class="time" style="width: 3.4042553191489%"></div>
<pre>

End PullbackSigma.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 227
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Paths in pullbacks *)

</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 230
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>Definition equiv_path_pullback {A B C} (f : B -&gt; A) (g : C -&gt; A)
           (x y : Pullback f g)
  : { p : x.1 = y.1 &amp; { q : x.2.1 = y.2.1 &amp; PathSquare (ap f p) (ap g q) x.2.2 y.2.2 } }
      &lt;~&gt; (x = y).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 234
Time: 0.009s">
<div class="time" style="width: 3.8297872340426%"></div>
<pre>
  revert y; rapply equiv_path_from_contr.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exists idpath.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exists idpath.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    cbn.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply sq_refl_v.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 237
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
  destruct x as [b [c p]]; unfold Pullback; cbn.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 238
Time: 0.005s">
<div class="time" style="width: 2.1276595744681%"></div>
<pre>
  contr_sigsig b (idpath b).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 239
Time: 0.01s">
<div class="time" style="width: 4.2553191489362%"></div>
<pre>
  contr_sigsig c (idpath c).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  cbn.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 241
Time: 0.004s">
<div class="time" style="width: 1.7021276595745%"></div>
<pre>
  rapply (contr_equiv' {p' : f b = g c &amp; p = p'}).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros p'.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply sq_1G.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 244
Time: 0.004s">
<div class="time" style="width: 1.7021276595745%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The 3x3 Lemma *)

</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section Pullback3x3.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 248
Time: 0.004s">
<div class="time" style="width: 1.7021276595745%"></div>
<pre>

  Context
    (A00 A02 A04 A20 A22 A24 A40 A42 A44 : Type)
    (f01 : A00 -&gt; A02) (f03 : A04 -&gt; A02)
    (f10 : A00 -&gt; A20) (f12 : A02 -&gt; A22) (f14 : A04 -&gt; A24)
    (f21 : A20 -&gt; A22) (f23 : A24 -&gt; A22)
    (f30 : A40 -&gt; A20) (f32 : A42 -&gt; A22) (f34 : A44 -&gt; A24)
    (f41 : A40 -&gt; A42) (f43 : A44 -&gt; A42)
    (H11 : f12 o f01 == f21 o f10) (H13 : f12 o f03 == f23 o f14)
    (H31 : f32 o f41 == f21 o f30) (H33 : f32 o f43 == f23 o f34).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Let fX1 := functor_pullback f10 f30 f12 f32 f21 f01 f41 H11 H31.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Let fX3 := functor_pullback f14 f34 f12 f32 f23 f03 f43 H13 H33.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 261
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
  Let f1X := functor_pullback f01 f03 f21 f23 f12 f10 f14 (symmetry _ _ H11) (symmetry _ _ H13).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 262
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre>
  Let f3X := functor_pullback f41 f43 f21 f23 f32 f30 f34 (symmetry _ _ H31) (symmetry _ _ H33).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 263
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Theorem pullback3x3 : Pullback fX1 fX3 &lt;~&gt; Pullback f1X f3X.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (_ oE _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 267
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    1,3:do 2 (rapply equiv_functor_sigma_id; intro).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 268
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    1:apply equiv_path_pullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 269
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    1:symmetry; apply equiv_path_pullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 270
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
    refine (_ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 271
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 272
Time: 0.002s">
<div class="time" style="width: 0.85106382978723%"></div>
<pre> do 4 (rapply equiv_functor_sigma_id; intro).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 272
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine (sq_tr oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 273
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
      refine (sq_move_14^-1 oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 274
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
      refine (sq_move_31 oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 275
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
      refine (sq_move_24^-1 oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 276
Time: 0.001s">
<div class="time" style="width: 0.42553191489362%"></div>
<pre>
      refine (sq_move_23^-1 oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 277
Time: 0.004s">
<div class="time" style="width: 1.7021276595745%"></div>
<pre>
      rewrite 2 inv_V.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 278
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      reflexivity.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 279
Time: 0.235s">
<div class="time" style="width: 100%"></div>
<pre>
    make_equiv.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 280
Time: 0.083s">
<div class="time" style="width: 35.31914893617%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 281
Time: 0.043s">
<div class="time" style="width: 18.297872340426%"></div>
<pre>

End Pullback3x3.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 284
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

